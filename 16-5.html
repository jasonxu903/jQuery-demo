<!doctype html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://cdn.bootcss.com/jquery/2.2.4/jquery.js"></script>
    <style>
        img{
            width: 240px;
            height: 180px;
        }
    </style>

    <title>Document</title>
</head>
<body>
<ul class="container">
    <li><a href="#"><img src=""
                         data-src="http://cdn.jirengu.com/book.jirengu.com/img/1.jpg"/></a>
    </li>
    <li><a href="#"><img
            src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
            data-src="http://cdn.jirengu.com/book.jirengu.com/img/2.jpg"/></a>
    </li>
    <li><a href="#"><img
            src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
            data-src="http://cdn.jirengu.com/book.jirengu.com/img/3.jpg"/></a>
    </li>
    <li><a href="#"><img id=a
                         src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                         data-src="http://cdn.jirengu.com/book.jirengu.com/img/4.jpg"/></a>
    </li>
    <li><a href="#"><img
            src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
            data-src="http://cdn.jirengu.com/book.jirengu.com/img/5.jpg"/></a>
    </li>
    <li><a href="#"><img
            src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
            data-src="http://cdn.jirengu.com/book.jirengu.com/img/6.jpg"/></a>
    </li>
    <li><a href="#"><img
            src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
            data-src="http://cdn.jirengu.com/book.jirengu.com/img/7.jpg"/></a>
    </li>
    <li><a href="#"><img
            src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
            data-src="http://cdn.jirengu.com/book.jirengu.com/img/8.jpg"/></a>
    </li>
    <li><a href="#"><img
            src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
            data-src="http://cdn.jirengu.com/book.jirengu.com/img/9.jpg"/></a>
    </li>
    <li><a href="#"><img
            src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
            data-src="http://cdn.jirengu.com/book.jirengu.com/img/10.jpg"/></a>
    </li>
    <li><a href="#"><img
            src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
            data-src="http://cdn.jirengu.com/book.jirengu.com/img/11.jpg"/></a>
    </li>
    <li><a href="#"><img
            src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
            data-src="http://cdn.jirengu.com/book.jirengu.com/img/12.jpg"/></a>
    </li>
    <li><a href="#"><img
            src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
            data-src="http://cdn.jirengu.com/book.jirengu.com/img/13.jpg"/></a>
    </li>
    <li><a href="#"><img
            src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
            data-src="http://cdn.jirengu.com/book.jirengu.com/img/14.jpg"/></a>
    </li>
    <li><a href="#"><img id=b
                         src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                         data-src="http://cdn.jirengu.com/book.jirengu.com/img/15.jpg"/></a>
    </li>
    <li><a href="#"><img
            src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
            data-src="http://cdn.jirengu.com/book.jirengu.com/img/16.jpg"/></a>
    </li>

</ul>

<script>
    lazyImg()
    var loadClock
    $(window).on('scroll', function () {
        if(loadClock){
            clearTimeout(loadClock)
        }
        loadClock = setTimeout(function () {
            lazyImg()
            console.log('scroll')
        }, 300)
    })

    function lazyImg() {
        $('.container img').each(function () {
            if (checkVisible($(this)) && !isLoaded($(this))) {
                loadImg($(this))
            }
        })
    }
    function checkVisible($node) {
        var offsetTop = $node.offset().top
        var scrollTop = $(window).scrollTop()
        var windowHeight = $(window).height()
        return offsetTop > scrollTop && offsetTop < scrollTop + windowHeight
        // 如果希望滑过的图片也加载，去掉 offsetTop > scrollTop
    }

    function isLoaded($node) {
        return $node.attr('src') === $node.attr('data-src')
    }

    function loadImg($node) {
        $node.attr('src', $node.attr('data-src'))
    }
</script>
</body>
</html>